{"ast":null,"code":"import AccessError from \"@/components/AccessError\";\nimport HeaderComponent from \"@/components/HeaderComponent\";\nimport FooterComponent from \"@/components/FooterComponent\";\nexport default {\n  name: \"App\",\n  components: {\n    HeaderComponent,\n    FooterComponent,\n    AccessError\n  },\n\n  data() {\n    return {\n      api: 'http://localhost:3000',\n      catalogUrl: '/api/products',\n      cartUrl: '/api/cart',\n      products: [],\n      filtered: [],\n      cartItems: [],\n      error: false\n    };\n  },\n\n  methods: {\n    filter(userSearch) {\n      const regexp = new RegExp(userSearch, 'i');\n      this.filtered = this.products.filter(product => regexp.test(product.product_name));\n      console.log(this.filtered);\n      console.log(userSearch);\n    },\n\n    getJson(url) {\n      return fetch(url).then(result => result.json()).catch(error => {\n        console.log(error);\n        this.error = true;\n      });\n    },\n\n    postJson(url, data) {\n      return fetch(url, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(result => result.json()).catch(error => {\n        console.log(`ошибка записи: ${error}`);\n      });\n    },\n\n    putJson(url, data) {\n      return fetch(url, {\n        method: 'PUT',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(result => result.json()).catch(error => {\n        console.log(`ошибка обновления: ${error}`);\n      });\n    },\n\n    deleteJson(url) {\n      return fetch(url, {\n        method: 'DELETE'\n      }).then(() => {\n        console.log('removed');\n      }).catch(err => {\n        console.log(`ошибка удаления: ${err}`);\n      });\n    }\n\n  },\n\n  mounted() {\n    this.getJson(`${this.api + this.catalogUrl}`).then(data => {\n      for (let el of data) {\n        this.products.push(el);\n        this.filtered.push(el);\n      }\n    });\n    this.getJson(`${this.api + this.cartUrl}`).then(data => {\n      for (let el of data.contents) {\n        this.cartItems.push(el);\n      }\n    });\n  }\n\n};","map":{"version":3,"mappings":"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","names":["AccessError","HeaderComponent","FooterComponent","name","components","data","api","catalogUrl","cartUrl","products","filtered","cartItems","error","methods","filter","userSearch","regexp","RegExp","product","test","product_name","console","log","getJson","url","fetch","then","result","json","catch","postJson","method","headers","body","JSON","stringify","putJson","deleteJson","err","mounted","el","push","contents"],"sourceRoot":"","sources":["C:\\Project\\Geekbrains\\prof-layout\\src\\App.vue"],"sourcesContent":["<template>\r\n\t<HeaderComponent v-on:filter=\"filter\"/>\r\n\t<div v-if=\"error\">\r\n\t\t<AccessError/>\r\n\t</div>\r\n\t<div v-else>\r\n\t\t<router-view></router-view>\r\n\t</div>\r\n\t<FooterComponent/>\r\n</template>\r\n\t\r\n\r\n<script>\r\n\timport AccessError from \"@/components/AccessError\";\r\n\timport HeaderComponent from \"@/components/HeaderComponent\"\r\n\timport FooterComponent from \"@/components/FooterComponent\";\r\n\t\r\n\texport default {\r\n\t\tname: \"App\",\r\n\t\tcomponents: {\r\n\t\t\tHeaderComponent,\r\n\t\t\tFooterComponent,\r\n\t\t\tAccessError\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tapi: 'http://localhost:3000',\r\n\t\t\t\tcatalogUrl: '/api/products',\r\n\t\t\t\tcartUrl: '/api/cart',\r\n\t\t\t\tproducts: [],\r\n\t\t\t\tfiltered: [],\r\n\t\t\t\tcartItems: [],\r\n\t\t\t\terror: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfilter(userSearch) {\r\n\t\t\t\tconst regexp = new RegExp(userSearch, 'i');\r\n\t\t\t\tthis.filtered = this.products.filter(product => regexp.test(product.product_name));\r\n\t\t\t\tconsole.log(this.filtered)\r\n\t\t\t\tconsole.log(userSearch)\r\n\t\t\t},\r\n\t\t\tgetJson(url) {\r\n\t\t\t\treturn fetch(url)\r\n\t\t\t\t\t.then(result => result.json())\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\tthis.error = true;\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpostJson(url, data){\r\n\t\t\t\treturn fetch(url, {\r\n\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify(data)\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(result => result.json())\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(`ошибка записи: ${error}`);\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tputJson(url, data){\r\n\t\t\t\treturn fetch(url, {\r\n\t\t\t\t\tmethod: 'PUT',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbody: JSON.stringify(data)\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(result => result.json())\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(`ошибка обновления: ${error}`);\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteJson(url){\r\n\t\t\t\treturn fetch(url, {\r\n\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tconsole.log('removed');\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tconsole.log(`ошибка удаления: ${err}`);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getJson(`${this.api + this.catalogUrl}`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tfor (let el of data) {\r\n\t\t\t\t\t\tthis.products.push(el);\r\n\t\t\t\t\t\tthis.filtered.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\tthis.getJson(`${this.api + this.cartUrl}`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tfor (let el of data.contents){\r\n\t\t\t\t\t\tthis.cartItems.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\t}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}