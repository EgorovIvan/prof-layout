{"ast":null,"code":"import CartProducts from \"./CartProducts\";\nexport default {\n  name: \"ShoppingCart\",\n  components: {\n    CartProducts\n  },\n\n  data() {\n    return {\n      cartUrl: '/api/cart',\n      cart: [],\n      cartPrice: 0\n    };\n  },\n\n  methods: {\n    removeCount(product) {\n      this.$root.putJson(`${this.$root.api + this.cartUrl + \"/\" + product.id_product}`, {\n        quantity: -1\n      }).then(data => {\n        if (data.result === 1) {\n          if (product.quantity > 0) {\n            product.quantity--;\n          } else {\n            return product.quantity;\n          }\n        }\n      });\n      this.totalPrice();\n    },\n\n    addCount(product) {\n      this.$root.putJson(`${this.$root.api + this.cartUrl + \"/\" + product.id_product}`, {\n        quantity: 1\n      }).then(data => {\n        if (data.result === 1) {\n          product.quantity++;\n        }\n      });\n      this.totalPrice();\n    },\n\n    deleteItem(product) {\n      this.$root.deleteJson(`http://localhost:3000/api/cart/${product.id_product}`).then(() => {\n        this.cart = this.cart.filter(item => item.id_product !== product.id_product);\n      });\n      this.totalPrice();\n    },\n\n    clear() {// let collection = document.querySelectorAll('.shop-cart__item');\n      // for (let elem of collection) {\n      // \telem.remove();\n      // }\n      // this.cart = [];\n    },\n\n    totalPrice() {\n      let sum = 0;\n      this.cart.map(product => {\n        return sum += product.price * product.quantity;\n      });\n      this.cartPrice = sum;\n    }\n\n  },\n\n  mounted() {\n    this.$root.getJson(`${this.$root.api + this.cartUrl}`).then(data => {\n      for (let el of data.contents) {\n        this.cart.push(el);\n      }\n\n      this.totalPrice();\n    });\n  }\n\n};","map":{"version":3,"mappings":"AAwCC,OAAOA,YAAP,MAAyB,gBAAzB;AAEA,eAAe;EACdC,IAAI,EAAE,cADQ;EAEdC,UAAU,EAAE;IACXF;EADW,CAFE;;EAKdG,IAAI,GAAG;IACN,OAAO;MACNC,OAAO,EAAE,WADH;MAENC,IAAI,EAAE,EAFA;MAGNC,SAAS,EAAE;IAHL,CAAP;EAKA,CAXa;;EAYdC,OAAO,EAAE;IACRC,WAAW,CAACC,OAAD,EAAU;MACpB,KAAKC,KAAL,CAAWC,OAAX,CAAoB,GAAE,KAAKD,KAAL,CAAWE,GAAX,GAAiB,KAAKR,OAAtB,GAAgC,GAAhC,GAAsCK,OAAO,CAACI,UAAW,EAA/E,EAAkF;QAACC,QAAQ,EAAE,CAAC;MAAZ,CAAlF,EACEC,IADF,CACOZ,IAAG,IAAK;QACb,IAAGA,IAAI,CAACa,MAAL,KAAgB,CAAnB,EAAqB;UACpB,IAAIP,OAAO,CAACK,QAAR,GAAiB,CAArB,EAAwB;YACvBL,OAAO,CAACK,QAAR;UACD,CAFA,MAEO;YACN,OAAOL,OAAO,CAACK,QAAf;UACD;QACD;MACA,CATF;MAUA,KAAKG,UAAL;IACA,CAbO;;IAcRC,QAAQ,CAACT,OAAD,EAAU;MACjB,KAAKC,KAAL,CAAWC,OAAX,CAAoB,GAAE,KAAKD,KAAL,CAAWE,GAAX,GAAiB,KAAKR,OAAtB,GAAgC,GAAhC,GAAsCK,OAAO,CAACI,UAAW,EAA/E,EAAkF;QAACC,QAAQ,EAAE;MAAX,CAAlF,EACEC,IADF,CACOZ,IAAG,IAAK;QACb,IAAGA,IAAI,CAACa,MAAL,KAAgB,CAAnB,EAAqB;UACnBP,OAAO,CAACK,QAAR;QACF;MACA,CALF;MAMA,KAAKG,UAAL;IACA,CAtBO;;IAuBRE,UAAU,CAACV,OAAD,EAAU;MACnB,KAAKC,KAAL,CAAWU,UAAX,CAAuB,kCAAiCX,OAAO,CAACI,UAAW,EAA3E,EACEE,IADF,CACO,MAAM;QACX,KAAKV,IAAL,GAAY,KAAKA,IAAL,CAAUgB,MAAV,CAAiBC,IAAG,IAAKA,IAAI,CAACT,UAAL,KAAoBJ,OAAO,CAACI,UAArD,CAAZ;MACA,CAHF;MAIA,KAAKI,UAAL;IACA,CA7BO;;IA8BRM,KAAK,GAAG,CACP;MACA;MACA;MACA;MACA;IACA,CApCO;;IAqCRN,UAAU,GAAG;MACZ,IAAIO,GAAE,GAAI,CAAV;MACA,KAAKnB,IAAL,CAAUoB,GAAV,CAAchB,OAAM,IAAK;QACxB,OAAOe,GAAE,IAAKf,OAAO,CAACiB,KAAR,GAAgBjB,OAAO,CAACK,QAAtC;MACA,CAFD;MAGA,KAAKR,SAAL,GAAiBkB,GAAjB;IACA;;EA3CO,CAZK;;EAyDdG,OAAO,GAAG;IACT,KAAKjB,KAAL,CAAWkB,OAAX,CAAoB,GAAE,KAAKlB,KAAL,CAAWE,GAAX,GAAiB,KAAKR,OAAQ,EAApD,EACEW,IADF,CACOZ,IAAG,IAAK;MACb,KAAK,IAAI0B,EAAT,IAAe1B,IAAI,CAAC2B,QAApB,EAA8B;QAC7B,KAAKzB,IAAL,CAAU0B,IAAV,CAAeF,EAAf;MACD;;MACA,KAAKZ,UAAL;IACA,CANF;EAOD;;AAjEc,CAAf","names":["CartProducts","name","components","data","cartUrl","cart","cartPrice","methods","removeCount","product","$root","putJson","api","id_product","quantity","then","result","totalPrice","addCount","deleteItem","deleteJson","filter","item","clear","sum","map","price","mounted","getJson","el","contents","push"],"sourceRoot":"","sources":["C:\\Project\\Geekbrains\\prof-layout\\src\\components\\ShoppingCart.vue"],"sourcesContent":["<template>\r\n\t<main>\r\n\t\t<section class=\"page-name\">\r\n\t\t\t<div class=\"container page-name__wrp\">\r\n\t\t\t\t<h2 class=\"page-name__title\">shopping cart</h2>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t\t<section class=\"shop\">\r\n\t\t\t<div class=\"container shop__wrp\">\r\n\t\t\t\t<div class=\"shop-cart\">\r\n\t\t\t\t\t<CartProducts :products=\"cart\" v-on:remove-count=\"removeCount\" v-on:add-count=\"addCount\" v-on:delete-item=\"deleteItem\"/>\r\n\t\t\t\t\t<div class=\"shop-cart__btns\">\r\n\t\t\t\t\t\t<button class=\"shop-cart__btn btn clear\" v-on:click=\"$root.clear\">clear shopping cart</button>\r\n\t\t\t\t\t\t<button class=\"shop-cart__btn btn\">continue shopping</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"shop-shipping\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<h3 class=\"shop-shipping__title\">shipping address</h3>\r\n\t\t\t\t\t\t<input type=\"text\" class=\"shop-shipping__input input\" required placeholder=\"Bangladesh\">\r\n\t\t\t\t\t\t<input type=\"text\" class=\"shop-shipping__input input\" required placeholder=\"State\">\r\n\t\t\t\t\t\t<input type=\"text\" class=\"shop-shipping__input input\" required placeholder=\"Postcode / Zip\">\r\n\t\t\t\t\t\t<button class=\"shop-shipping__btn btn\">get a quote</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"shop-total\">\r\n\t\t\t\t\t\t<p class=\"shop-total__text\">sub total\r\n\t\t\t\t\t\t\t<input class=\"shop-total__text-input\" type=\"text\" value=\"$900\" disabled></p>\r\n\t\t\t\t\t\t<h3 class=\"shop-total__title\">grand total\r\n\t\t\t\t\t\t\t<input id=\"grand_total\" class=\"shop-total__title-input\" type=\"text\" :value=\"cartPrice\" disabled>\r\n\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t<hr class=\"shop-total__line\">\r\n\t\t\t\t\t\t<button class=\"shop-total__btn btn\" v-on:click=\"render\">proceed to checkout</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t</main>\r\n</template>\r\n\r\n<script>\r\n\timport CartProducts from \"./CartProducts\";\r\n\t\r\n\texport default {\r\n\t\tname: \"ShoppingCart\",\r\n\t\tcomponents: {\r\n\t\t\tCartProducts\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcartUrl: '/api/cart',\r\n\t\t\t\tcart: [],\r\n\t\t\t\tcartPrice: 0,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tremoveCount(product) {\r\n\t\t\t\tthis.$root.putJson(`${this.$root.api + this.cartUrl + \"/\" + product.id_product}`, {quantity: -1})\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tif(data.result === 1){\r\n\t\t\t\t\t\t\tif (product.quantity>0) {\r\n\t\t\t\t\t\t\t\tproduct.quantity--;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn product.quantity;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\taddCount(product) {\r\n\t\t\t\tthis.$root.putJson(`${this.$root.api + this.cartUrl + \"/\" + product.id_product}`, {quantity: 1})\r\n\t\t\t\t\t.then(data => {\r\n\t\t\t\t\t\tif(data.result === 1){\r\n\t\t\t\t\t\t\t\tproduct.quantity++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\tdeleteItem(product) {\r\n\t\t\t\tthis.$root.deleteJson(`http://localhost:3000/api/cart/${product.id_product}`)\r\n\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\tthis.cart = this.cart.filter(item => item.id_product !== product.id_product)\r\n\t\t\t\t\t})\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\t// let collection = document.querySelectorAll('.shop-cart__item');\r\n\t\t\t\t// for (let elem of collection) {\r\n\t\t\t\t// \telem.remove();\r\n\t\t\t\t// }\r\n\t\t\t\t// this.cart = [];\r\n\t\t\t},\r\n\t\t\ttotalPrice() {\r\n\t\t\t\tlet sum = 0;\r\n\t\t\t\tthis.cart.map(product => {\r\n\t\t\t\t\treturn sum += product.price * product.quantity;\r\n\t\t\t\t});\r\n\t\t\t\tthis.cartPrice = sum;\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.$root.getJson(`${this.$root.api + this.cartUrl}`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tfor (let el of data.contents) {\r\n\t\t\t\t\t\tthis.cart.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.totalPrice();\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n</script>"]},"metadata":{},"sourceType":"module"}