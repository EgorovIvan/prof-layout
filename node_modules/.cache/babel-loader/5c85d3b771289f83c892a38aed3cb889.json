{"ast":null,"code":"const API = 'https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses';\nexport default {\n  name: \"App\",\n\n  data() {\n    return {\n      catalogUrl: '/catalogData.json',\n      products: [],\n      filtered: [],\n      cart: JSON.parse(localStorage.getItem(\"toCart\")),\n      img: './img/null.png',\n      userSearch: '',\n      show: false,\n      cartPrice: 0\n    };\n  },\n\n  methods: {\n    filter() {\n      const regexp = new RegExp(this.userSearch, 'i');\n      this.filtered = this.products.filter(product => regexp.test(product.product_name));\n    },\n\n    getJson(url) {\n      return fetch(url).then(result => result.json()).catch(error => {\n        console.log(error);\n      });\n    },\n\n    addProduct(product) {\n      let catalogStorage = JSON.parse(localStorage.getItem(\"toCart\"));\n      let find = catalogStorage.find(item => product.id_product === item.id_product);\n\n      if (find) {\n        find.quantity++;\n      } else {\n        const prod = Object.assign({\n          quantity: 1\n        }, product);\n        catalogStorage.push(prod);\n      }\n\n      let string = JSON.stringify(catalogStorage);\n      localStorage.setItem(\"toCart\", string);\n      console.log(this.cart);\n    },\n\n    clear() {\n      let collection = document.querySelectorAll('.shop-cart__item');\n\n      for (let elem of collection) {\n        elem.remove();\n      }\n\n      this.cart = [];\n      localStorage.removeItem(\"toCart\");\n      this.totalPrice();\n    },\n\n    deleteItem(id) {\n      this.cart = this.cart.filter(item => item.id_product !== id);\n      let string = JSON.stringify(this.cart);\n      localStorage.setItem(\"toCart\", string);\n      this.totalPrice();\n    },\n\n    removeCount(id) {\n      this.cart.map(item => {\n        if (item.id_product === id) {\n          item.quantity > 0 ? item.quantity-- : item.quantity = 0;\n        }\n      });\n      let string = JSON.stringify(this.cart);\n      localStorage.setItem(\"toCart\", string);\n      this.totalPrice();\n    },\n\n    addCount(id) {\n      this.cart.map(item => {\n        if (item.id_product === id) {\n          item.quantity++;\n        }\n      });\n      let string = JSON.stringify(this.cart);\n      localStorage.setItem(\"toCart\", string);\n      this.totalPrice();\n    },\n\n    totalPrice() {\n      let sum = 0;\n      this.cart.map(product => {\n        return sum += product.price * product.quantity;\n      });\n      this.cartPrice = sum;\n    }\n\n  },\n\n  mounted() {\n    this.getJson(`${API + this.catalogUrl}`).then(data => {\n      for (let el of data) {\n        this.products.push(el);\n      }\n\n      localStorage.setItem(\"toCart\", JSON.stringify([]));\n      this.filter();\n      this.totalPrice();\n    });\n  }\n\n};","map":{"version":3,"mappings":"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","names":["API","name","data","catalogUrl","products","filtered","cart","JSON","parse","localStorage","getItem","img","userSearch","show","cartPrice","methods","filter","regexp","RegExp","product","test","product_name","getJson","url","fetch","then","result","json","catch","error","console","log","addProduct","catalogStorage","find","item","id_product","quantity","prod","Object","assign","push","string","stringify","setItem","clear","collection","document","querySelectorAll","elem","remove","removeItem","totalPrice","deleteItem","id","removeCount","map","addCount","sum","price","mounted","el"],"sourceRoot":"","sources":["C:\\Project\\Geekbrains\\prof-layout\\src\\App.vue"],"sourcesContent":["<template>\r\n\t<router-view/>\r\n</template>\r\n\t\r\n\r\n<script>\r\n\t\r\n\tconst API = 'https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses';\r\n\t\r\n\texport default {\r\n\t\tname: \"App\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcatalogUrl: '/catalogData.json',\r\n\t\t\t\tproducts: [],\r\n\t\t\t\tfiltered: [],\r\n\t\t\t\tcart: JSON.parse(localStorage.getItem(\"toCart\")),\r\n\t\t\t\timg: './img/null.png',\r\n\t\t\t\tuserSearch: '',\r\n\t\t\t\tshow: false,\r\n\t\t\t\tcartPrice: 0,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tfilter() {\r\n\t\t\t\tconst regexp = new RegExp(this.userSearch, 'i');\r\n\t\t\t\tthis.filtered = this.products.filter(product => regexp.test(product.product_name));\r\n\t\t\t},\r\n\t\t\tgetJson(url) {\r\n\t\t\t\treturn fetch(url)\r\n\t\t\t\t\t.then(result => result.json())\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddProduct(product) {\r\n\t\t\t\tlet catalogStorage = JSON.parse(localStorage.getItem(\"toCart\"));\r\n\t\t\t\tlet find = catalogStorage.find((item => product.id_product === item.id_product))\r\n\t\t\t\tif (find) {\r\n\t\t\t\t\tfind.quantity++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst prod = Object.assign({quantity: 1}, product);\r\n\t\t\t\t\tcatalogStorage.push(prod);\r\n\t\t\t\t}\r\n\t\t\t\tlet string = JSON.stringify(catalogStorage);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tconsole.log(this.cart)\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tlet collection = document.querySelectorAll('.shop-cart__item');\r\n\t\t\t\tfor (let elem of collection) {\r\n\t\t\t\t\telem.remove();\r\n\t\t\t\t}\r\n\t\t\t\tthis.cart = [];\r\n\t\t\t\tlocalStorage.removeItem(\"toCart\");\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\tdeleteItem(id) {\r\n\t\t\t\tthis.cart = this.cart.filter(item => item.id_product !== id)\r\n\t\t\t\tlet string = JSON.stringify(this.cart);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\tremoveCount(id) {\r\n\t\t\t\tthis.cart.map(item => {\r\n\t\t\t\t\tif (item.id_product === id) {\r\n\t\t\t\t\t\titem.quantity > 0 ? item.quantity-- : item.quantity = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet string = JSON.stringify(this.cart);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\taddCount(id) {\r\n\t\t\t\tthis.cart.map(item => {\r\n\t\t\t\t\tif (item.id_product === id) {\r\n\t\t\t\t\t\titem.quantity++;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet string = JSON.stringify(this.cart);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\ttotalPrice() {\r\n\t\t\t\tlet sum = 0;\r\n\t\t\t\tthis.cart.map(product => {\r\n\t\t\t\t\treturn sum += product.price * product.quantity\r\n\t\t\t\t});\r\n\t\t\t\tthis.cartPrice = sum;\r\n\t\t\t},\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.getJson(`${API + this.catalogUrl}`)\r\n\t\t\t\t.then(data => {\r\n\t\t\t\t\tfor (let el of data) {\r\n\t\t\t\t\t\tthis.products.push(el);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlocalStorage.setItem(\"toCart\", JSON.stringify([]));\r\n\t\t\t\t\tthis.filter();\r\n\t\t\t\t\tthis.totalPrice();\r\n\t\t\t\t});\r\n\t\t},\r\n\t}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}