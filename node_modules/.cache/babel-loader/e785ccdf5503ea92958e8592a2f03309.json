{"ast":null,"code":"import AccessError from \"@/components/AccessError\";\nexport default {\n  name: \"App\",\n  components: {\n    AccessError\n  },\n\n  data() {\n    return {\n      api: 'http://localhost:3000',\n      error: false\n    };\n  },\n\n  methods: {\n    getJson(url) {\n      return fetch(url).then(result => result.json()).catch(error => {\n        console.log(error);\n        this.error = true;\n      });\n    },\n\n    addProduct(product) {\n      let catalogStorage = JSON.parse(localStorage.getItem(\"toCart\"));\n      let find = catalogStorage.find(item => product.id_product === item.id_product);\n\n      if (find) {\n        find.quantity++;\n      } else {\n        const prod = Object.assign({\n          quantity: 1\n        }, product);\n        catalogStorage.push(prod);\n      }\n\n      let string = JSON.stringify(catalogStorage);\n      localStorage.setItem(\"toCart\", string);\n      this.render();\n    },\n\n    clear() {\n      let collection = document.querySelectorAll('.shop-cart__item');\n\n      for (let elem of collection) {\n        elem.remove();\n      }\n\n      this.cart = [];\n      localStorage.removeItem(\"toCart\");\n      this.totalPrice();\n    },\n\n    deleteItem(id) {\n      this.cart = this.cart.filter(item => item.id_product !== id);\n      let string = JSON.stringify(this.cart);\n      localStorage.setItem(\"toCart\", string);\n      this.totalPrice();\n      console.log(this.cart);\n    },\n\n    removeCount(id) {\n      this.cart.map(item => {\n        if (item.id_product === id) {\n          item.quantity > 0 ? item.quantity-- : item.quantity = 0;\n        }\n      });\n      let string = JSON.stringify(this.cart);\n      localStorage.setItem(\"toCart\", string);\n      this.totalPrice();\n    },\n\n    addCount(id) {\n      this.cart.map(item => {\n        if (item.id_product === id) {\n          item.quantity++;\n        }\n      });\n      let string = JSON.stringify(this.cart);\n      localStorage.setItem(\"toCart\", string);\n      this.totalPrice();\n    },\n\n    totalPrice() {\n      let sum = 0;\n      this.cart.map(product => {\n        return sum += product.price * product.quantity;\n      });\n      this.cartPrice = sum;\n    },\n\n    render() {\n      this.cart = JSON.parse(localStorage.getItem(\"toCart\"));\n    }\n\n  },\n\n  mounted() {}\n\n};","map":{"version":3,"mappings":"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","names":["AccessError","name","components","data","api","error","methods","getJson","url","fetch","then","result","json","catch","console","log","addProduct","product","catalogStorage","JSON","parse","localStorage","getItem","find","item","id_product","quantity","prod","Object","assign","push","string","stringify","setItem","render","clear","collection","document","querySelectorAll","elem","remove","cart","removeItem","totalPrice","deleteItem","id","filter","removeCount","map","addCount","sum","price","cartPrice","mounted"],"sourceRoot":"","sources":["C:\\Project\\Geekbrains\\prof-layout\\src\\App.vue"],"sourcesContent":["<template>\r\n\t<div v-if=\"error\">\r\n\t\t<AccessError/>\r\n\t</div>\r\n\t<div v-else>\r\n\t\t<router-view/>\r\n\t</div>\r\n</template>\r\n\t\r\n\r\n<script>\r\n\timport AccessError from \"@/components/AccessError\";\r\n\t\r\n\texport default {\r\n\t\tname: \"App\",\r\n\t\tcomponents: {\r\n\t\t\tAccessError\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tapi: 'http://localhost:3000',\r\n\t\t\t\terror: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetJson(url) {\r\n\t\t\t\treturn fetch(url)\r\n\t\t\t\t\t.then(result => result.json())\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t\tthis.error = true;\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddProduct(product) {\r\n\t\t\t\tlet catalogStorage = JSON.parse(localStorage.getItem(\"toCart\"));\r\n\t\t\t\tlet find = catalogStorage.find((item => product.id_product === item.id_product))\r\n\t\t\t\tif (find) {\r\n\t\t\t\t\tfind.quantity++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst prod = Object.assign({quantity: 1}, product);\r\n\t\t\t\t\tcatalogStorage.push(prod);\r\n\t\t\t\t}\r\n\t\t\t\tlet string = JSON.stringify(catalogStorage);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.render();\r\n\t\t\t},\r\n\t\t\tclear() {\r\n\t\t\t\tlet collection = document.querySelectorAll('.shop-cart__item');\r\n\t\t\t\tfor (let elem of collection) {\r\n\t\t\t\t\telem.remove();\r\n\t\t\t\t}\r\n\t\t\t\tthis.cart = [];\r\n\t\t\t\tlocalStorage.removeItem(\"toCart\");\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\tdeleteItem(id) {\r\n\t\t\t\tthis.cart = this.cart.filter(item => item.id_product !== id)\r\n\t\t\t\tlet string = JSON.stringify(this.cart);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t\tconsole.log(this.cart)\r\n\t\t\t},\r\n\t\t\tremoveCount(id) {\r\n\t\t\t\tthis.cart.map(item => {\r\n\t\t\t\t\tif (item.id_product === id) {\r\n\t\t\t\t\t\titem.quantity > 0 ? item.quantity-- : item.quantity = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet string = JSON.stringify(this.cart);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\taddCount(id) {\r\n\t\t\t\tthis.cart.map(item => {\r\n\t\t\t\t\tif (item.id_product === id) {\r\n\t\t\t\t\t\titem.quantity++;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet string = JSON.stringify(this.cart);\r\n\t\t\t\tlocalStorage.setItem(\"toCart\", string);\r\n\t\t\t\tthis.totalPrice();\r\n\t\t\t},\r\n\t\t\ttotalPrice() {\r\n\t\t\t\tlet sum = 0;\r\n\t\t\t\tthis.cart.map(product => {\r\n\t\t\t\t\treturn sum += product.price * product.quantity\r\n\t\t\t\t});\r\n\t\t\t\tthis.cartPrice = sum;\r\n\t\t\t},\r\n\t\t\trender() {\r\n\t\t\t\tthis.cart = JSON.parse(localStorage.getItem(\"toCart\"));\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\r\n\t\t},\r\n\t}\r\n</script>\r\n"]},"metadata":{},"sourceType":"module"}